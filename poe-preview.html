<!DOCTYPE html>
<html lang="es">
<head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PowerGreen - Reduce Tu Huella de Carbono</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2ECC71',
                        secondary: '#27AE60',
                        accent: '#3498DB',
                        dark: '#2C3E50',
                        light: '#ECF0F1'
                    }
                }
            },
            darkMode: 'class'
        }

        // Detectar modo oscuro
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }

        .progress-bar {
            transition: width 1s ease-in-out;
        }

        /* Estilo personalizado para el control deslizante */
        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #d7dcdf;
        }
        .info-tooltip {
            position: relative;
            cursor: pointer;
        }

        .info-tooltip:hover::after {
            content: attr(data-info);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            padding: 8px;
            background: #2C3E50;
            color: white;
            border-radius: 4px;
            font-size: 14px;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #2ECC71;
            cursor: pointer;
        }

        .dark input[type="range"] {
            background: #4B5563;
        }

        .challenge-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .challenge-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .dark .challenge-card:hover {
            box-shadow: 0 10px 20px rgba(255, 255, 255, 0.05);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        /* Efectos para el topbar */
        .tab-button:hover {
            transform: translateY(-2px);
            opacity: 0.9;
        }

        /* Efectos para las tarjetas */
        .tip-card:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        /* Efectos para botones */
        button:hover {
            transform: translateY(-1px);
        }

        /* Efectos para inputs */
        input:hover, select:hover {
            border-color: #2ECC71;
        }
        /* Animaciones */
        @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
        }

        @keyframes slideUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
        }

        @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
        }

        .animate-fade-in {
        animation: fadeIn 1s ease-out;
        }

        .animate-slide-up {
        animation: slideUp 0.8s ease-out forwards;
        opacity: 0;
        }

        .animate-bounce {
        animation: bounce 2s infinite;
        }
        /* Animación para el modal */
        #contactModal {
        transition: opacity 0.3s ease;
        }

        #contactModal > div {
        transform: scale(0.95);
        transition: transform 0.3s ease;
        }

        #contactModal:not(.hidden) > div {
        transform: scale(1);
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200">
    <header class="bg-primary text-white py-4 shadow-md">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center">
                <img src="pg_logo.png" alt="PowerGreen Logo" class="w-8 h-8 mr-2">
                <h1 class="text-xl font-bold">PowerGreen</h1>
            </div>
            <nav>
                <button id="menuToggle" class="md:hidden focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                </button>
                <ul id="mobileMenu" class="hidden absolute top-16 right-0 bg-primary w-full py-2 px-4 md:relative md:flex md:w-auto md:top-0 md:py-0 md:space-x-6 z-10">
                    <li class="my-2 md:my-0"><button class="tab-button focus:outline-none" data-tab="calculator">Calculadora</button></li>
                    <li class="my-2 md:my-0"><button class="tab-button focus:outline-none" data-tab="tips">Consejos</button></li>
                    <li class="my-2 md:my-0"><button class="tab-button focus:outline-none" data-tab="challenges">Retos</button></li>
                    <li class="my-2 md:my-0"><button class="tab-button focus:outline-none" data-tab="progress">Progreso</button></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container mx-auto px-4 py-6">
        <!-- Sección de Bienvenida -->
        <section id="welcome" class="text-center py-10 px-4">
            <div class="max-w-4xl mx-auto">
              <h1 class="text-4xl md:text-5xl font-bold mb-6 text-primary">PowerGreen</h1>
              
              <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8 text-left animate-fade-in">
                <h2 class="text-2xl font-bold mb-4 text-primary">¿Qué es la Huella de Carbono?</h2>
                <p class="mb-4">La huella de carbono es un indicador ambiental que mide la cantidad total de emisiones de gases de efecto invernadero (GEI), expresadas en toneladas de dióxido de carbono equivalente (CO₂e), que son liberadas directa o indirectamente a la atmósfera como resultado de actividades humanas.</p>
                <p class="mb-4">Estas actividades pueden incluir desde el uso de medios de transporte, el consumo energético en el hogar, la alimentación, el consumo de bienes y servicios, hasta la generación de residuos.</p>
              </div>
              
              <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 animate-slide-up">
                  <h3 class="text-xl font-bold mb-3 text-primary">¿Por qué es importante?</h3>
                  <p>La huella de carbono es una herramienta clave para comprender el impacto que tienen nuestros hábitos cotidianos en el cambio climático. Al reducir nuestras emisiones, contribuimos a limitar el aumento de la temperatura global.</p>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 animate-slide-up" style="animation-delay: 0.2s">
                  <h3 class="text-xl font-bold mb-3 text-primary">¿Qué es PowerGreen?</h3>
                  <p>PowerGreen es una página web que nace con un propósito claro: que cada persona pueda conocer el impacto que deja en el planeta y, sobre todo, que tenga el poder de reducirlo.</p>
                </div>
              </div>
              
              <button id="getStartedBtn" class="bg-primary hover:bg-secondary text-white font-bold py-3 px-8 rounded-full transition-all transform hover:scale-105 shadow-lg animate-bounce">
                Comienza Ahora
              </button>
            </div>
          </section>

        <!-- Calculadora de Huella de Carbono -->
        <section id="calculator" class="tab-content py-6">
            <h2 class="text-2xl font-bold mb-6 text-primary">Calcula Tu Huella de Carbono</h2>
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Transporte</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block mb-2">¿Cuántos kilómetros conduces por semana?</label>
                            
                            <input type="range" min="0" max="500" value="100" class="slider w-full" id="driveDistance">
                            <div class="flex justify-between">
                                <span>0 km</span>
                                <span id="drivingValue">100 km</span>
                                <span>500 km</span>
                            </div>
                        </div>
                        <div>
                            <label class="block mb-2">¿Cuántos vuelos tomas al año?</label>
                            
                            <input type="range" min="0" max="20" value="2" class="slider w-full" id="flightsPerYear">
                            <div class="flex justify-between">
                                <span>0</span>
                                <span id="flightsValue">2 vuelos</span>
                                <span>20</span>
                            </div>
                        </div>
                        <div>
                            <label class="block mb-2">¿Con qué frecuencia usas transporte público?</label>
                            
                            <select id="publicTransport" class="w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base">
                                <option value="0">Nunca</option>
                                <option value="1">Raramente (1-2 veces al mes)</option>
                                <option value="2" selected="">Ocasionalmente (1-2 veces por semana)</option>
                                <option value="3">Frecuentemente (3-5 veces por semana)</option>
                                <option value="4">Diariamente</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Energía en el Hogar</h3>
                    <div class="space-y-4">
                        <div>
                            <div class="flex items-center">
                                <label class="block mb-2">¿Cuál es tu consumo mensual de electricidad (kWh)?</label>
                                <span class="info-tooltip ml-1" data-info="Puedes consultarlo en la página de tu proveedor de energía. El consumo promedio en hogares es de 250-300 kWh mensuales.">
                                    <svg class="w-4 h-4 inline text-gray-500 dark:text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z" clip-rule="evenodd"></path>
                                    </svg>
                                </span>
                            </div>
                            <input type="range" min="0" max="1000" value="300" class="slider w-full" id="electricityUsage">
                            <div class="flex justify-between">
                                <span>0 kWh</span>
                                <span id="electricityValue">300 kWh</span>
                                <span>1000 kWh</span>
                            </div>
                        </div>
                        <div>
                            <label class="block mb-2">¿Utilizas fuentes de energía renovable? (Solar, Eólica o Hidrólica)</label>
                            
                            <select id="renewableEnergy" class="w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base">
                                <option value="0">No</option>
                                <option value="1">Parcialmente</option>
                                <option value="2">Sí, completamente</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Alimentación & Consumo</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block mb-2">¿Con qué frecuencia consumes productos animales?</label>
                            <select id="dietType" class="w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base">
                                <option value="4">Diariamente, varias veces</option>
                                <option value="3" selected>Diariamente, una vez</option>
                                <option value="2">Unas pocas veces por semana</option>
                                <option value="1">Raramente</option>
                                <option value="0">Nunca (vegano/vegetariano)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block mb-2">¿Con qué frecuencia compras ropa nueva?</label>
                            <select id="clothingHabits" class="w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base">
                                <option value="3">Muy frecuentemente (mensualmente)</option>
                                <option value="2" selected>Ocasionalmente (trimestralmente)</option>
                                <option value="1">Raramente (anualmente)</option>
                                <option value="0">Casi nunca / Solo de segunda mano</option>
                            </select>
                        </div>
                        <div>
                            <label class="block mb-2">¿Con qué frecuencia compras electrónicos nuevos?</label>
                            <select id="electronicsHabits" class="w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base">
                                <option value="3">Muy frecuentemente (cada 1-2 años)</option>
                                <option value="2" selected>Ocasionalmente (cada 3-5 años)</option>
                                <option value="1">Raramente (cada 5+ años)</option>
                                <option value="0">Casi nunca / Solo de segunda mano</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Gestión de Residuos</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block mb-2">¿Reciclas?</label>
                           
                            <select id="recyclingHabits" class="w-full p-2 border rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base">
                                <option value="0">Nunca</option>
                                <option value="1">A veces</option>
                                <option value="2" selected="">Regularmente</option>
                                <option value="3">Siempre, y hago compost</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button id="calculateBtn" class="bg-primary hover:bg-secondary text-white font-bold py-2 px-6 rounded-lg transition-colors duration-300 w-full md:w-auto">
                    Calcular Mi Huella
                </button>
            </div>

            <!-- Sección de Resultados (inicialmente oculta) -->
            <div id="resultsSection" class="mt-8 hidden">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-semibold mb-4 text-primary">Resultados de Tu Huella de Carbono</h3>
                    
                    <div class="mb-6 text-center">
                        <p class="text-lg mb-2">Tu huella de carbono anual estimada:</p>
                        <p class="text-4xl font-bold text-primary"><span id="totalCarbonFootprint">0</span> toneladas CO₂e</p>
                        <p class="text-sm mt-2 text-gray-600 dark:text-gray-400">
                            El promedio es <span id="averageComparison">10</span> toneladas CO₂e por persona
                        </p>
                    </div>
                    
                    <div class="mb-6">
                        <h4 class="font-semibold mb-2">Tu impacto por categoría:</h4>
                        <div class="h-64">
                            <canvas id="footprintChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h4 class="font-semibold mb-2">Áreas de mejora:</h4>
                        <ul id="improvementAreas" class="list-disc pl-5 space-y-2">
                            <!-- Se llenará dinámicamente -->
                        </ul>
                    </div>
                    
                    <div class="mt-6 flex flex-wrap justify-center gap-4">
                        <button id="viewTipsBtn" class="bg-accent hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-300">
                            Ver Consejos Personalizados
                        </button>
                        <button id="viewChallengesBtn" class="bg-secondary hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-300">
                            Unirse a Retos
                        </button>
                        <button id="saveResultsBtn" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-300">
                            Guardar Resultados
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección de Consejos -->
        <section id="tips" class="tab-content py-6">
            <h2 class="text-2xl font-bold mb-6 text-primary">Consejos Personalizados</h2>
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                <div id="tipFilters" class="mb-6">
                    <h3 class="text-lg font-semibold mb-3">Filtrar por categoría:</h3>
                    <div class="flex flex-wrap gap-2">
                        <button class="tip-filter active px-4 py-2 rounded-full bg-primary text-white" data-category="all">Todos</button>
                        <button class="tip-filter px-4 py-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white" data-category="transport">Transporte</button>
                        <button class="tip-filter px-4 py-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white" data-category="energy">Energía</button>
                        <button class="tip-filter px-4 py-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white" data-category="food">Alimentación</button>
                        <button class="tip-filter px-4 py-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white" data-category="consumption">Consumo</button>
                        <button class="tip-filter px-4 py-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white" data-category="waste">Residuos</button>
                    </div>
                </div>

                <div id="tipsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Consejos de Transporte -->
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-blue-500" data-category="transport">
                        <h3 class="font-semibold text-lg mb-2">Combina Recados</h3>
                        <p>Planifica tus viajes para combinar múltiples recados en un solo trayecto. Esto puede reducir tu distancia de conducción hasta un 30%.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Reducir emisiones de transporte en 10-15%</p>
                    </div>
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-blue-500" data-category="transport">
                        <h3 class="font-semibold text-lg mb-2">Mantén la Presión Correcta de los Neumáticos</h3>
                        <p>Mantener tus neumáticos correctamente inflados puede mejorar la eficiencia de combustible hasta un 3%. Revisa la presión mensualmente.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Reducir consumo de combustible en 2-3%</p>
                    </div>
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-blue-500" data-category="transport">
                        <h3 class="font-semibold text-lg mb-2">Usa Transporte Público</h3>
                        <p>Tomar transporte público solo una vez a la semana en lugar de conducir puede reducir significativamente tu huella de carbono.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Ahorrar hasta 795 kg de CO₂ anuales</p>
                    </div>

                    <!-- Consejos de Energía -->
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-yellow-500" data-category="energy">
                        <h3 class="font-semibold text-lg mb-2">Cambia a Bombillas LED</h3>
                        <p>Las luces LED usan hasta 85% menos energía que las bombillas tradicionales y duran 25 veces más.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Reducir uso de energía en iluminación en 75-80%</p>
                    </div>
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-yellow-500" data-category="energy">
                        <h3 class="font-semibold text-lg mb-2">Desconecta Electrónicos</h3>
                        <p>Muchos dispositivos consumen energía incluso cuando están apagados. Desconecta cargadores y electrónicos cuando no los uses.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Reducir consumo en espera en 5-10%</p>
                    </div>
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-yellow-500" data-category="energy">
                        <h3 class="font-semibold text-lg mb-2">Ajusta el Termostato</h3>
                        <p>Baja tu termostato 1-2°C en invierno y súbelo 1-2°C en verano para ahorrar energía.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Reducir energía de calefacción/refrigeración en 5-15%</p>
                    </div>

                    <!-- Consejos de Alimentación -->
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-green-500" data-category="food">
                        <h3 class="font-semibold text-lg mb-2">Lunes Sin Carne</h3>
                        <p>No comer carne solo un día a la semana puede marcar una gran diferencia en tu huella de carbono.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Ahorrar hasta 400 kg de CO₂ anuales</p>
                    </div>
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-green-500" data-category="food">
                        <h3 class="font-semibold text-lg mb-2">Compra Local y de Temporada</h3>
                        <p>Los alimentos locales y de temporada requieren menos transporte y a menudo menos energía para su producción.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Reducir huella de carbono de alimentos en 10-20%</p>
                    </div>
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-green-500" data-category="food">
                        <h3 class="font-semibold text-lg mb-2">Reduce el Desperdicio de Alimentos</h3>
                        <p>Planifica comidas, almacena alimentos correctamente y usa sobras para reducir la cantidad de comida que tiras.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Ahorrar hasta 300 kg de CO₂ anuales</p>
                    </div>

                    <!-- Consejos de Consumo -->
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-purple-500" data-category="consumption">
                        <h3 class="font-semibold text-lg mb-2">Compra Calidad, Compra Menos</h3>
                        <p>Invierte en artículos duraderos y de alta calidad que durarán más, reduciendo la necesidad de reemplazos frecuentes.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Reducir huella de bienes de consumo en 20%</p>
                    </div>
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-purple-500" data-category="consumption">
                        <h3 class="font-semibold text-lg mb-2">Compra de Segunda Mano</h3>
                        <p>Considera comprar artículos usados. El costo ambiental de producción ya ha sido pagado.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Reducir emisiones de manufactura en 100%</p>
                    </div>
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-purple-500" data-category="consumption">
                        <h3 class="font-semibold text-lg mb-2">Repara, No Reemplaces</h3>
                        <p>Aprende habilidades básicas de reparación o encuentra servicios locales para reparar electrónicos, ropa y otros artículos.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Extender vida útil del producto 2-3 veces</p>
                    </div>

                    <!-- Consejos de Residuos -->
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-red-500" data-category="waste">
                        <h3 class="font-semibold text-lg mb-2">Comienza a Compostar</h3>
                        <p>Compostar residuos orgánicos reduce emisiones de metano de vertederos y crea tierra valiosa para plantas.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Reducir emisiones de residuos orgánicos en 50%</p>
                    </div>
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-red-500" data-category="waste">
                        <h3 class="font-semibold text-lg mb-2">Usa Contenedores Reutilizables</h3>
                        <p>Lleva tus propios contenedores para comida para llevar, sobras y compras para reducir residuos de empaques desechables.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Eliminar 100+ piezas de empaques desechables al año</p>
                    </div>
                    <div class="tip-card bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-red-500" data-category="waste">
                        <h3 class="font-semibold text-lg mb-2">Reciclaje Adecuado</h3>
                        <p>Aprende las pautas de reciclaje locales para asegurarte de que tus artículos realmente se reciclen correctamente.</p>
                        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Impacto potencial: Aumentar efectividad del reciclaje en 30%</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección de Retos -->
        <section id="challenges" class="tab-content py-6">
            <h2 class="text-2xl font-bold mb-6 text-primary">Retos de Sostenibilidad</h2>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8">
                <h3 class="text-xl font-semibold mb-4">Retos Activos</h3>
                <div id="activeChallengesTodo" class="space-y-4">
                    <p class="text-gray-500 dark:text-gray-400 text-center py-4">Aún no te has unido a ningún reto.</p>
                </div>
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-semibold mb-4">Retos Disponibles</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="challenge-card bg-white dark:bg-gray-700 rounded-lg shadow-md p-5">
                        <div class="flex justify-between items-start mb-4">
                            <h4 class="font-semibold text-lg">Semana Sin Carne</h4>
                            <span class="bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-100 px-2 py-1 rounded-full text-xs">7 días</span>
                        </div>
                        <p class="mb-4">Intenta no comer carne durante una semana para reducir significativamente tu huella de carbono.</p>
                        <div class="mb-3">
                            <span class="text-sm font-medium">Dificultad:</span>
                            <div class="flex items-center ml-2">
                                <span class="text-yellow-500">●●●○○</span>
                            </div>
                        </div>
                        <div class="mb-4">
                            <span class="text-sm font-medium">Impacto:</span>
                            <div class="flex items-center ml-2">
                                <span class="text-green-500">●●●●○</span>
                            </div>
                        </div>
                        <button class="join-challenge-btn w-full bg-primary hover:bg-secondary text-white font-bold py-2 px-4 rounded transition-colors duration-300" data-id="meatless-week">
                            Unirse al Reto
                        </button>
                    </div>
                    
                    <div class="challenge-card bg-white dark:bg-gray-700 rounded-lg shadow-md p-5">
                        <div class="flex justify-between items-start mb-4">
                            <h4 class="font-semibold text-lg">Días Sin Auto</h4>
                            <span class="bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-100 px-2 py-1 rounded-full text-xs">5 días</span>
                        </div>
                        <p class="mb-4">Comprométete a usar solo transporte público, bicicleta o caminar durante 5 días.</p>
                        <div class="mb-3">
                            <span class="text-sm font-medium">Dificultad:</span>
                            <div class="flex items-center ml-2">
                                <span class="text-yellow-500">●●●●○</span>
                            </div>
                        </div>
                        <div class="mb-4">
                            <span class="text-sm font-medium">Impacto:</span>
                            <div class="flex items-center ml-2">
                                <span class="text-green-500">●●●●●</span>
                            </div>
                        </div>
                        <button class="join-challenge-btn w-full bg-primary hover:bg-secondary text-white font-bold py-2 px-4 rounded transition-colors duration-300" data-id="no-car-days">
                            Unirse al Reto
                        </button>
                    </div>
                    
                    <div class="challenge-card bg-white dark:bg-gray-700 rounded-lg shadow-md p-5">
                        <div class="flex justify-between items-start mb-4">
                            <h4 class="font-semibold text-lg">Fin de Semana Cero Residuos</h4>
                            <span class="bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-100 px-2 py-1 rounded-full text-xs">2 días</span>
                        </div>
                        <p class="mb-4">Intenta no producir residuos para vertedero durante un fin de semana completo. Recicla, composta o evita residuos por completo.</p>
                        <div class="mb-3">
                            <span class="text-sm font-medium">Dificultad:</span>
                            <div class="flex items-center ml-2">
                                <span class="text-yellow-500">●●○○○</span>
                            </div>
                        </div>
                        <div class="mb-4">
                            <span class="text-sm font-medium">Impacto:</span>
                            <div class="flex items-center ml-2">
                                <span class="text-green-500">●●●○○</span>
                            </div>
                        </div>
                        <button class="join-challenge-btn w-full bg-primary hover:bg-secondary text-white font-bold py-2 px-4 rounded transition-colors duration-300" data-id="zero-waste-weekend">
                            Unirse al Reto
                        </button>
                    </div>
                    
                    <div class="challenge-card bg-white dark:bg-gray-700 rounded-lg shadow-md p-5">
                        <div class="flex justify-between items-start mb-4">
                            <h4 class="font-semibold text-lg">Mes de Ahorro de Energía</h4>
                            <span class="bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-100 px-2 py-1 rounded-full text-xs">30 días</span>
                        </div>
                        <p class="mb-4">Reduce tu consumo de energía en 20% durante un mes haciendo cambios simples en tus hábitos diarios.</p>
                        <div class="mb-3">
                            <span class="text-sm font-medium">Dificultad:</span>
                            <div class="flex items-center ml-2">
                                <span class="text-yellow-500">●●○○○</span>
                            </div>
                        </div>
                        <div class="mb-4">
                            <span class="text-sm font-medium">Impacto:</span>
                            <div class="flex items-center ml-2">
                                <span class="text-green-500">●●●●○</span>
                            </div>
                        </div>
                        <button class="join-challenge-btn w-full bg-primary hover:bg-secondary text-white font-bold py-2 px-4 rounded transition-colors duration-300" data-id="energy-saver-month">
                            Unirse al Reto
                        </button>
                    </div>
                    
                    <div class="challenge-card bg-white dark:bg-gray-700 rounded-lg shadow-md p-5">
                        <div class="flex justify-between items-start mb-4">
                            <h4 class="font-semibold text-lg">Mes Sin Compras Nuevas</h4>
                            <span class="bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-100 px-2 py-1 rounded-full text-xs">30 días</span>
                        </div>
                        <p class="mb-4">Comprométete a no comprar artículos no esenciales nuevos durante un mes. Pide prestado, repara o prescinde.</p>
                        <div class="mb-3">
                            <span class="text-sm font-medium">Dificultad:</span>
                            <div class="flex items-center ml-2">
                                <span class="text-yellow-500">●●●○○</span>
                            </div>
                        </div>
                        <div class="mb-4">
                            <span class="text-sm font-medium">Impacto:</span>
                            <div class="flex items-center ml-2">
                                <span class="text-green-500">●●●○○</span>
                            </div>
                        </div>
                        <button class="join-challenge-btn w-full bg-primary hover:bg-secondary text-white font-bold py-2 px-4 rounded transition-colors duration-300" data-id="no-new-stuff-month">
                            Unirse al Reto
                        </button>
                    </div>
                    
                    <div class="challenge-card bg-white dark:bg-gray-700 rounded-lg shadow-md p-5">
                        <div class="flex justify-between items-start mb-4">
                            <h4 class="font-semibold text-lg">Ahorrador de Agua</h4>
                            <span class="bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-100 px-2 py-1 rounded-full text-xs">14 días</span>
                        </div>
                        <p class="mb-4">Reduce tu consumo de agua en 25% durante dos semanas mediante simples cambios diarios.</p>
                        <div class="mb-3">
                            <span class="text-sm font-medium">Dificultad:</span>
                            <div class="flex items-center ml-2">
                                <span class="text-yellow-500">●●○○○</span>
                            </div>
                        </div>
                        <div class="mb-4">
                            <span class="text-sm font-medium">Impacto:</span>
                            <div class="flex items-center ml-2">
                                <span class="text-green-500">●●●○○</span>
                            </div>
                        </div>
                        <button class="join-challenge-btn w-full bg-primary hover:bg-secondary text-white font-bold py-2 px-4 rounded transition-colors duration-300" data-id="water-saver">
                            Unirse al Reto
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección de Progreso -->
        <section id="progress" class="tab-content py-6">
            <h2 class="text-2xl font-bold mb-6 text-primary">Tu Progreso</h2>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8">
                <h3 class="text-xl font-semibold mb-4">Huella de Carbono en el Tiempo</h3>
                <div class="h-64">
                    <canvas id="progressChart"></canvas>
                </div>
                <p id="noProgressData" class="text-center py-4 text-gray-500 dark:text-gray-400">Registra tu huella en el tiempo calculándola regularmente.</p>
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8">
                <h3 class="text-xl font-semibold mb-4">Historial de Retos</h3>
                <div id="challengeHistory" class="space-y-4">
                    <p class="text-center py-4 text-gray-500 dark:text-gray-400">Aún no has completado ningún reto.</p>
                </div>
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-semibold mb-4">Tu Impacto</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md p-5 text-center">
                        <div class="text-4xl font-bold text-primary mb-2">0</div>
                        <p class="text-gray-600 dark:text-gray-400">Toneladas de CO₂ ahorradas</p>
                    </div>
                    <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md p-5 text-center">
                        <div class="text-4xl font-bold text-primary mb-2">0</div>
                        <p class="text-gray-600 dark:text-gray-400">Retos completados</p>
                    </div>
                    <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md p-5 text-center">
                        <div class="text-4xl font-bold text-primary mb-2">0</div>
                        <p class="text-gray-600 dark:text-gray-400">Días de seguimiento</p>
                    </div>
                </div>
            </div>
        </section>
        <section id="login" class="tab-content py-6 hidden">
            <div class="max-w-md mx-auto bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden p-8">
              <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-primary">Inicia Sesión</h2>
                <p class="text-gray-600 dark:text-gray-400">O crea una cuenta para guardar tu progreso</p>
              </div>
              
              <div id="loginForm" class="space-y-6">
                <div>
                  <label class="block text-sm font-medium mb-1">Correo electrónico</label>
                  <input type="email" id="loginEmail" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">Contraseña</label>
                  <input type="password" id="loginPassword" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary">
                </div>
                <button id="loginBtn" class="w-full bg-primary hover:bg-secondary text-white py-3 rounded-lg transition-all">
                  Iniciar Sesión
                </button>
                <p class="text-center text-sm">¿No tienes cuenta? <button id="showRegister" class="text-primary font-medium">Regístrate</button></p>
              </div>
          
              <div id="registerForm" class="space-y-6 hidden">
                <div>
                  <label class="block text-sm font-medium mb-1">Nombre</label>
                  <input type="text" id="registerName" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">Correo electrónico</label>
                  <input type="email" id="registerEmail" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary">
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">Contraseña</label>
                  <input type="password" id="registerPassword" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary">
                </div>
                <button id="registerBtn" class="w-full bg-accent hover:bg-blue-600 text-white py-3 rounded-lg transition-all">
                  Crear Cuenta
                </button>
                <p class="text-center text-sm">¿Ya tienes cuenta? <button id="showLogin" class="text-primary font-medium">Inicia Sesión</button></p>
              </div>
          
              <div id="loginMessage" class="mt-4 text-center text-red-500 hidden"></div>
            </div>
          </section>
    </main>

    <footer class="bg-dark text-white py-6 mt-10">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h2 class="text-xl font-bold text-primary mb-2">PowerGreen</h2>
                    <p class="text-sm text-gray-400">Haciendo un futuro sostenible accesible para todos.</p>
                </div>
                <div class="flex space-x-4">
                    <a href="#" target="_blank" class="hover:text-primary transition-colors duration-300">Acerca de</a>
                    <a href="#" target="_blank" class="hover:text-primary transition-colors duration-300">Privacidad</a>
                    <a href="#" id="contactLink" class="hover:text-primary transition-colors duration-300">Contacto</a>
                </div>
            </div>
            <div class="text-center mt-6 text-sm text-gray-400">
                <p>© 2025 PowerGreen. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Navegación y gestión de pestañas
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            const menuToggle = document.getElementById('menuToggle');
            const mobileMenu = document.getElementById('mobileMenu');
            const getStartedBtn = document.getElementById('getStartedBtn');
            const welcomeSection = document.getElementById('welcome');
            const calculateBtn = document.getElementById('calculateBtn');
            const resultsSection = document.getElementById('resultsSection');
            
            // Valores de entrada de rango
            const driveDistance = document.getElementById('driveDistance');
            const drivingValue = document.getElementById('drivingValue');
            const flightsPerYear = document.getElementById('flightsPerYear');
            const flightsValue = document.getElementById('flightsValue');
            const electricityUsage = document.getElementById('electricityUsage');
            const electricityValue = document.getElementById('electricityValue');
            
            // Filtrado de consejos
            const tipFilters = document.querySelectorAll('.tip-filter');
            const tipCards = document.querySelectorAll('.tip-card');
            
            // Botones de navegación de resultados
            const viewTipsBtn = document.getElementById('viewTipsBtn');
            const viewChallengesBtn = document.getElementById('viewChallengesBtn');
            const saveResultsBtn = document.getElementById('saveResultsBtn');
            
            // Botones de retos
            const joinChallengeButtons = document.querySelectorAll('.join-challenge-btn');
            
            // Alternar menú móvil
            menuToggle.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
            });
            
            // Navegación por pestañas
            function showTab(tabId) {
                tabContents.forEach(tab => {
                    tab.classList.remove('active');
                });
                tabButtons.forEach(button => {
                    button.classList.remove('text-white', 'font-bold');
                    button.classList.add('text-gray-200');
                });
                
                const targetTab = document.getElementById(tabId);
                const targetButton = document.querySelector(`[data-tab="${tabId}"]`);
                
                if (targetTab) {
                    targetTab.classList.add('active');
                    // Ocultar sección de bienvenida cuando se muestra cualquier pestaña
                    welcomeSection.classList.add('hidden');
                }
                
                if (targetButton) {
                    targetButton.classList.add('text-white', 'font-bold');
                    targetButton.classList.remove('text-gray-200');
                }
                
                // Cerrar menú móvil después de seleccionar en móvil
                if (window.innerWidth < 768) {
                    mobileMenu.classList.add('hidden');
                }
            }
            
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    showTab(tabId);
                });
            });
            
            // Botón Comenzar
            getStartedBtn.addEventListener('click', function() {
                welcomeSection.classList.add('hidden');
                showTab('calculator');
            });
            
            // Mostrar valores de controles deslizantes
            driveDistance.addEventListener('input', function() {
                drivingValue.textContent = `${this.value} km`;
            });
            
            flightsPerYear.addEventListener('input', function() {
                flightsValue.textContent = `${this.value} vuelos`;
            });
            
            electricityUsage.addEventListener('input', function() {
                electricityValue.textContent = `${this.value} kWh`;
            });
            
            // Filtrar consejos
            tipFilters.forEach(filter => {
                filter.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    
                    // Actualizar botón de filtro activo
                    tipFilters.forEach(btn => {
                        btn.classList.remove('active', 'bg-primary', 'text-white');
                        btn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-800', 'dark:text-white');
                    });
                    this.classList.add('active', 'bg-primary', 'text-white');
                    this.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-800', 'dark:text-white');
                    
                    // Filtrar tarjetas de consejos
                    tipCards.forEach(card => {
                        if (category === 'all' || card.getAttribute('data-category') === category) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
            
            // Calcular huella de carbono
            calculateBtn.addEventListener('click', function() {
                // Algoritmo simple de cálculo para demostración
                const driving = parseInt(driveDistance.value) * 0.0002; // toneladas CO2 por km
                const flights = parseInt(flightsPerYear.value) * 0.5; // toneladas CO2 por vuelo (promedio)
                const publicTransport = 0.2 - (parseInt(document.getElementById('publicTransport').value) * 0.05); // basado en frecuencia de uso
                const electricity = parseInt(electricityUsage.value) * 0.0005; // toneladas CO2 por kWh
                const renewableEnergy = parseInt(document.getElementById('renewableEnergy').value) * 0.3; // reducción basada en uso de renovables
                const dietImpact = parseInt(document.getElementById('dietType').value) * 0.5; // basado en tipo de dieta
                const clothingImpact = parseInt(document.getElementById('clothingHabits').value) * 0.2;
                const electronicsImpact = parseInt(document.getElementById('electronicsHabits').value) * 0.3;
                const recyclingImpact = 0.5 - (parseInt(document.getElementById('recyclingHabits').value) * 0.15); // basado en hábitos de reciclaje
                
                // Calcular total y redondear a 1 decimal
                const transportTotal = driving + flights + publicTransport;
                const energyTotal = electricity - renewableEnergy;
                const foodTotal = dietImpact;
                const consumptionTotal = clothingImpact + electronicsImpact;
                const wasteTotal = recyclingImpact;
                
                const total = Math.round((transportTotal + energyTotal + foodTotal + consumptionTotal + wasteTotal) * 10) / 10;
                
                // Mostrar resultados
                document.getElementById('totalCarbonFootprint').textContent = total;
                resultsSection.classList.remove('hidden');
                
                // Crear o actualizar gráfico
                createFootprintChart([
                    transportTotal,
                    energyTotal,
                    foodTotal,
                    clothingImpact,
                    electronicsImpact,
                    wasteTotal
                ]);
                
                // Generar áreas de mejora
                generateImprovementAreas({
                    transport: transportTotal,
                    energy: energyTotal,
                    food: foodTotal,
                    consumption: consumptionTotal,
                    waste: wasteTotal
                });
                
                // Desplazarse a resultados
                resultsSection.scrollIntoView({ behavior: 'smooth' });
                
                // Guardar datos para seguimiento de progreso
                saveFootprintData(total);
                updateProgressChart();
            });
            
            // Creación de gráfico de huella
            let footprintChart;
            function createFootprintChart(data) {
                const ctx = document.getElementById('footprintChart').getContext('2d');
                
                if (footprintChart) {
                    footprintChart.destroy();
                }
                
                footprintChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Transporte', 'Energía en el Hogar', 'Alimentación', 'Ropa', 'Electrónicos', 'Residuos'],
                        datasets: [{
                            data: data,
                            backgroundColor: [
                                '#3498DB', // Azul - Transporte
                                '#F1C40F', // Amarillo - Energía
                                '#2ECC71', // Verde - Alimentación
                                '#9B59B6', // Morado - Ropa
                                '#FFA500', // Naranja - Electrónicos
                                '#E74C3C'  // Rojo - Residuos
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: {
                                    color: document.documentElement.classList.contains('dark') ? '#ECF0F1' : '#2C3E50'
                                }
                            }
                        }
                    }
                });
            }
            
            // Generar áreas de mejora basadas en resultados
            function generateImprovementAreas(data) {
                const improvementList = document.getElementById('improvementAreas');
                improvementList.innerHTML = '';
                
                // Ordenar categorías por impacto
                const categories = Object.entries(data).sort((a, b) => b[1] - a[1]);
                
                // Generar sugerencias para las 3 principales categorías
                for (let i = 0; i < Math.min(3, categories.length); i++) {
                    const [category, impact] = categories[i];
                    const suggestion = getImprovementSuggestion(category);
                    const li = document.createElement('li');
                    li.className = 'text-gray-700 dark:text-gray-300';
                    li.innerHTML = `<strong>${formatCategoryName(category)}:</strong> ${suggestion}`;
                    improvementList.appendChild(li);
                }
            }
            
            // Formatear nombre de categoría para mostrar
            function formatCategoryName(category) {
                const names = {
                    transport: 'Transporte',
                    energy: 'Energía',
                    food: 'Alimentación',
                    consumption: 'Consumo',
                    waste: 'Residuos'
                };
                return names[category] || category.charAt(0).toUpperCase() + category.slice(1);
            }
            
            // Obtener sugerencia de mejora basada en categoría
            function getImprovementSuggestion(category) {
                const suggestions = {
                    transport: "Intenta usar más el transporte público o compartir coche para reducir emisiones.",
                    energy: "Considera cambiar a electrodomésticos eficientes y iluminación LED.",
                    food: "Reducir el consumo de carne, especialmente carne roja, puede disminuir significativamente tu huella.",
                    consumption: "Enfócate en comprar menos artículos de mayor calidad que duren más.",
                    waste: "Mejora tus hábitos de reciclaje y considera compostar residuos orgánicos."
                };
                
                return suggestions[category] || "Busca formas de reducir el consumo en esta área.";
            }
            
            // Guardar datos de huella para seguimiento de progreso
            function saveFootprintData(total) {
                // En una aplicación real, esto usaría una base de datos o API
                // Como no podemos usar localStorage, usaremos almacenamiento temporal en memoria
                if (!window.footprintHistory) {
                    window.footprintHistory = [];
                }
                
                window.footprintHistory.push({
                    date: new Date(),
                    value: total
                });
                
                // Si tenemos datos, ocultar el mensaje "sin datos"
                if (window.footprintHistory.length > 0) {
                    document.getElementById('noProgressData').style.display = 'none';
                }
            }
            
            // Actualizar gráfico de progreso con datos históricos
            function updateProgressChart() {
                if (!window.footprintHistory || window.footprintHistory.length === 0) {
                    return;
                }
                
                const ctx = document.getElementById('progressChart').getContext('2d');
                
                // Preparar datos
                const labels = window.footprintHistory.map(entry => {
                    const date = new Date(entry.date);
                    return `${date.getMonth() + 1}/${date.getDate()}/${date.getFullYear()}`;
                });
                
                const values = window.footprintHistory.map(entry => entry.value);
                
                // Crear o actualizar gráfico
                if (window.progressChart) {
                    window.progressChart.destroy();
                }
                
                window.progressChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Huella de Carbono (toneladas CO₂e)',
                            data: values,
                            fill: false,
                            borderColor: '#2ECC71',
                            tension: 0.1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Toneladas CO₂e',
                                    color: document.documentElement.classList.contains('dark') ? '#ECF0F1' : '#2C3E50'
                                },
                                ticks: {
                                    color: document.documentElement.classList.contains('dark') ? '#ECF0F1' : '#2C3E50'
                                },
                                grid: {
                                    color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                }
                            },
                            x: {
                                ticks: {
                                    color: document.documentElement.classList.contains('dark') ? '#ECF0F1' : '#2C3E50'
                                },
                                grid: {
                                    color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                labels: {
                                    color: document.documentElement.classList.contains('dark') ? '#ECF0F1' : '#2C3E50'
                                }
                            }
                        }
                    }
                });
            }
            
            // Navegación de resultados
            viewTipsBtn.addEventListener('click', function() {
                showTab('tips');
            });
            
            viewChallengesBtn.addEventListener('click', function() {
                showTab('challenges');
            });
            
            saveResultsBtn.addEventListener('click', function() {
                // Ya guardado en la función de cálculo
                // Solo mostrar confirmación
                const saveBtn = document.getElementById('saveResultsBtn');
                const originalText = saveBtn.textContent;
                saveBtn.textContent = '¡Resultados Guardados!';
                saveBtn.disabled = true;
                
                setTimeout(() => {
                    saveBtn.textContent = originalText;
                    saveBtn.disabled = false;
                }, 2000);
            });
            
            // Funcionalidad para unirse a retos
            joinChallengeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const challengeId = this.getAttribute('data-id');
                    const challengeCard = this.closest('.challenge-card');
                    const challengeTitle = challengeCard.querySelector('h4').textContent;
                    
                    // Agregar a retos activos
                    const activeChallengesTodo = document.getElementById('activeChallengesTodo');
                    
                    // Si hay un mensaje "sin retos", limpiarlo
                    if (activeChallengesTodo.querySelector('p')) {
                        activeChallengesTodo.innerHTML = '';
                    }
                    
                    // Crear nuevo elemento de reto activo
                    const activeChallenge = document.createElement('div');
                    activeChallenge.className = 'bg-white dark:bg-gray-700 rounded-lg shadow-md p-4 fade-in';
                    activeChallenge.setAttribute('data-id', challengeId);
                    
                    // Agregar contenido del reto
                    activeChallenge.innerHTML = `
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="font-semibold">${challengeTitle}</h4>
                            <span class="bg-yellow-100 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-100 px-2 py-1 rounded-full text-xs">En Progreso</span>
                        </div>
                        <div class="mb-3">
                            <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2.5">
                                <div class="bg-primary h-2.5 rounded-full progress-bar" style="width: 0%"></div>
                            </div>
                            <div class="flex justify-between text-xs mt-1">
                                <span>0%</span>
                                <span>Progreso</span>
                                <span>100%</span>
                            </div>
                        </div>
                        <div class="flex justify-between">
                            <button class="bg-red-500 hover:bg-red-600 text-white text-sm py-1 px-3 rounded transition-colors duration-300 abandon-btn">
                                Abandonar
                            </button>
                            <button class="bg-green-500 hover:bg-green-600 text-white text-sm py-1 px-3 rounded transition-colors duration-300 progress-btn">
                                Actualizar Progreso
                            </button>
                        </div>
                    `;
                    
                    activeChallengesTodo.appendChild(activeChallenge);
                    
                    // Deshabilitar botón de unirse en la tarjeta de reto
                    this.textContent = 'Unido';
                    this.disabled = true;
                    this.classList.add('bg-gray-500');
                    this.classList.remove('bg-primary', 'hover:bg-secondary');
                    
                    // Agregar event listeners a los nuevos botones
                    activeChallenge.querySelector('.abandon-btn').addEventListener('click', function() {
                        // Eliminar de retos activos
                        activeChallenge.remove();
                        
                        // Rehabilitar botón de unirse
                        const joinButton = document.querySelector(`.join-challenge-btn[data-id="${challengeId}"]`);
                        if (joinButton) {
                            joinButton.textContent = 'Unirse al Reto';
                            joinButton.disabled = false;
                            joinButton.classList.remove('bg-gray-500');
                            joinButton.classList.add('bg-primary', 'hover:bg-secondary');
                        }
                        
                        // Si no hay retos activos, mostrar mensaje "sin retos"
                        if (activeChallengesTodo.children.length === 0) {
                            activeChallengesTodo.innerHTML = '<p class="text-gray-500 dark:text-gray-400 text-center py-4">Aún no te has unido a ningún reto.</p>';
                        }
                    });
                    
                    activeChallenge.querySelector('.progress-btn').addEventListener('click', function() {
                        // Simular actualización de progreso
                        const progressBar = activeChallenge.querySelector('.progress-bar');
                        const currentWidth = parseInt(progressBar.style.width) || 0;
                        const newWidth = Math.min(currentWidth + 20, 100);
                        progressBar.style.width = `${newWidth}%`;
                        
                        // Si se completó, mover a retos completados
                        if (newWidth >= 100) {
                            // Mover a historial de retos
                            const challengeHistory = document.getElementById('challengeHistory');
                            
                            // Si hay un mensaje "sin retos completados", limpiarlo
                            if (challengeHistory.querySelector('p')) {
                                challengeHistory.innerHTML = '';
                            }
                            
                            // Crear elemento de reto completado
                            const completedChallenge = document.createElement('div');
                            completedChallenge.className = 'bg-white dark:bg-gray-700 rounded-lg shadow-md p-4 fade-in';
                            completedChallenge.innerHTML = `
                                <div class="flex justify-between items-center">
                                    <h4 class="font-semibold">${challengeTitle}</h4>
                                    <span class="bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-100 px-2 py-1 rounded-full text-xs">Completado</span>
                                </div>
                                <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">Completado el ${new Date().toLocaleDateString()}</p>
                            `;
                            
                            challengeHistory.appendChild(completedChallenge);
                            
                            // Eliminar de retos activos
                            activeChallenge.remove();
                            
                            // Si no hay retos activos, mostrar mensaje "sin retos"
                            if (activeChallengesTodo.children.length === 0) {
                                activeChallengesTodo.innerHTML = '<p class="text-gray-500 dark:text-gray-400 text-center py-4">Aún no te has unido a ningún reto.</p>';
                            }
                        }
                    });
                });
            });
            
            // Inicializar mostrando primero la sección de bienvenida
            tabContents.forEach(tab => {
                tab.classList.remove('active');
            });
            
            welcomeSection.classList.remove('hidden');
            
            // Inicializar gráfico de progreso si existen datos
            updateProgressChart();
            // Login/Register functionality
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const showRegister = document.getElementById('showRegister');
            const showLogin = document.getElementById('showLogin');
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            const loginMessage = document.getElementById('loginMessage');

            showRegister.addEventListener('click', () => {
            loginForm.classList.add('hidden');
            registerForm.classList.remove('hidden');
            });

            showLogin.addEventListener('click', () => {
            registerForm.classList.add('hidden');
            loginForm.classList.remove('hidden');
            });

            loginBtn.addEventListener('click', () => {
            loginMessage.textContent = "Usuario o contraseña incorrectos (simulación)";
            loginMessage.classList.remove('hidden');
            
            // Simulate loading
            loginBtn.disabled = true;
            loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verificando...';
            
            setTimeout(() => {
                loginBtn.disabled = false;
                loginBtn.textContent = 'Iniciar Sesión';
            }, 1500);
            });

            registerBtn.addEventListener('click', () => {
            loginMessage.textContent = "Registro exitoso (simulación)";
            loginMessage.classList.remove('hidden');
            loginMessage.classList.add('text-green-500');
            
            // Simulate loading
            registerBtn.disabled = true;
            registerBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creando cuenta...';
            
            setTimeout(() => {
                registerBtn.disabled = false;
                registerBtn.textContent = 'Crear Cuenta';
                registerForm.classList.add('hidden');
                loginForm.classList.remove('hidden');
                loginMessage.classList.add('hidden');
            }, 2000);
            });
                    // Contact Modal functionality
        const contactModal = document.getElementById('contactModal');
        const contactLink = document.getElementById('contactLink');
        const closeContactModal = document.getElementById('closeContactModal');
        const copyEmailBtn = document.getElementById('copyEmailBtn');

        if (contactLink) {
            contactLink.addEventListener('click', (e) => {
                e.preventDefault();
                if (contactModal) contactModal.classList.remove('hidden');
            });
        }

        if (closeContactModal) {
            closeContactModal.addEventListener('click', () => {
                if (contactModal) contactModal.classList.add('hidden');
            });
        }

        if (copyEmailBtn) {
            copyEmailBtn.addEventListener('click', () => {
                navigator.clipboard.writeText('powergreen_app@gmail.com');
                copyEmailBtn.textContent = '¡Copiado!';
                setTimeout(() => {
                    copyEmailBtn.textContent = 'Copiar Email';
                }, 2000);
            });
        }

        // Cerrar modal al hacer click fuera del contenido
        if (contactModal) {
            contactModal.addEventListener('click', (e) => {
                if (e.target === contactModal) {
                    contactModal.classList.add('hidden');
                }
            });
        }
    });
    </script>
    <div id="contactModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-primary">Contacto</h3>
            <button id="closeContactModal" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          <div class="space-y-4">
            <div class="flex items-center">
              <svg class="w-5 h-5 mr-3 text-primary" fill="currentColor" viewBox="0 0 20 20">
                <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>
              </svg>
              <span>+54 379 4709835</span>
            </div>
            <div class="flex items-center">
              <svg class="w-5 h-5 mr-3 text-primary" fill="currentColor" viewBox="0 0 20 20">
                <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
                <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
              </svg>
              <span>powergreen_app@gmail.com</span>
            </div>
          </div>
          <div class="mt-6 flex justify-end">
            <button id="copyEmailBtn" class="bg-primary hover:bg-secondary text-white px-4 py-2 rounded-lg text-sm">
              Copiar Email
            </button>
          </div>
        </div>
      </div>
</body>
</html>